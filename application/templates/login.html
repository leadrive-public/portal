{% extends "base.html" %}

{% block title %}
<title>Login</title>
{% endblock %}

{% block navbarMenuContent %}
{% endblock %}

{% block userButton %}
{% endblock %}

{% block mainContent %}
<div class="container-lg">
    <div class="row">
        <div class="col-sm-6 text-light">
            <h1 class="display-4">Hello, world!</h1>
            <p>Welcome to the PORTAL, which is an entry to daily information.</p>
            <p>Version: V00.01.09A<br />
            Date: 2020-03-21<br />
            Be aware of continuous updates. Please <a href="mailto:it@leadrive.com" class="text-reset ">contact IT</a> for any advise or bug report.</p>
        </div>
        <div class="px-0 px-sm-3 col-sm-6">
            <form class="bg-light p-3 " style="background-color:rgba(255,255,255,0.8)!important" method="post" action="login" >
                <small class="form-text text-muted">Use leadrive email as the user name, and its corresponding password.</small>
                <hr />
                <div class="form-group">
                    <label for="userNameInput">User Name:</label>
                    <input type="email" class="form-control" id="userNameInput" v-model="userNameInput" name="userName" />
                </div>
                <div class="form-group">
                    <label for="passwordInput">Password:</label>
                    <input type="password" class="form-control" id="passwordInput" v-model="passwordInput" name="password" />
                </div>
                <div class="form-group form-check">
                    <input type="checkbox" class="form-check-input" id="RememberMeInput" name="rememberMe" />
                    <label class="form-check-label" for="RememberMeInput">Remember me</label>
                </div>
                {% if loginFail is defined and loginFail %}
                    <label class="text-danger">Login failed! Check your user name and password.</label>
                {% endif %}
                <input type="text" name="next" hidden id="nextUrlInput" />
                <button type="submit" class="btn btn-primary w-100">Sign in</button>
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block pageStylesAndScripts %}
<script>
    function getQueryVariable(variable) {
        let query = window.location.search.substring(1);
        let vars = query.split('&');
        for (let i = 0; i < vars.length; i++) {
            let pair = vars[i].split('=');
            if (decodeURIComponent(pair[0]) == variable) {
                return decodeURIComponent(pair[1]);
            }
        }
        console.log(`Query variable ${variable} not found.`);
        return "";
    }
    function pageLoad(){
        let next=getQueryVariable("next");
        $("#nextUrlInput").val(next);
    }
    //pageLoad();
</script>
{% endblock %}

